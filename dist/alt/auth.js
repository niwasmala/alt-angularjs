alt.loader.auth=function(){return"undefined"!=typeof alt.modules.auth?alt.modules.auth:(alt.auth={isenabled:!0},alt.modules.auth=angular.module("alt-auth",["angular-jwt"]).factory("$auth",["$log","$window","$store","jwtHelper",function(t,e,n,o){return n.set("token",n.get("token")||""),n.set("userdata",n.get("userdata")||{}),{token:"",userdata:{},set_token:function(t){this.token=t,n.set("token",this.token)},set_userdata:function(t){this.userdata=t,n.set("userdata",this.userdata)},login:function(t){"string"==typeof t?(this.set_token(t),this.set_userdata(o.decodeToken(this.token))):this.set_userdata(t)},logout:function(){this.token="",this.userdata={},n.set("token",""),n.set("userdata",{}),n.set("filter",""),n.set("sorting","")},islogin:function(){return""!=this.token?!o.isTokenExpired(this.token):Object.keys(this.userdata).length>0},check:function(t,e){return e=e||this.userdata.userlevel,0==t?this.islogin():this.islogin()&&"undefined"!=typeof e&&(parseInt(e)&parseInt(t))>0},set_permission:function(t,n,o){return n=n||this.userdata.userlevel,o="undefined"!=typeof o?o:!0,this.check(t,n)?!0:(o&&(e.location.href=alt.baseUrl+"error?code=403"),!1)}}}]).config(["$provide","$httpProvider",function(t,e){t.factory("authHttpInterceptor",["$auth","$log","$q","$window",function(t,e,n,o){return{request:function(e){return alt.auth.isenabled?(t.token&&(e.headers.Authorization="Bearer "+t.token),e):e}}}]),e.interceptors.reverse().push("authHttpInterceptor"),e.interceptors.reverse()}]).run(["$rootScope","$auth","$log","$store",function(t,e,n,o){t.$auth=e,""!=o.get("token")&&e.login(o.get("token")),""!=o.get("userdata")&&e.login(o.get("userdata"))}]),void alt.module("alt-auth",alt.modules.auth))},"undefined"!=typeof define?define([],function(){alt.loader.auth()}):alt.loader.auth();