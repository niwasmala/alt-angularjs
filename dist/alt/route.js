alt.baseUrl="#!/",alt.routeFolder=alt.routeFolder||"route",alt.defaultRoute=alt.defaultRoute||"",alt.modules.route=angular.module("alt-route",["ngRoute"]).config(["$locationProvider","$compileProvider","$routeProvider",function(t,e,l){t.html5Mode(!1),t.hashPrefix("!");var o=/^\s*(https?|ftp|mailto|file|tel|app):|data:image|javascript:|\//;e.urlSanitizationWhitelist&&e.urlSanitizationWhitelist(o),alt.routing=function(){return{templateUrl:function(t){var e=alt.routeFolder+"/"+(t.altmodule?t.altmodule+"/":"")+(t.altcontroller?t.altcontroller+"/":"")+(t.altaction?t.altaction+"/":""),l=e+"view."+(""!=alt.theme?alt.theme+".":"")+"html"+(""!=alt.urlArgs?"?"+alt.urlArgs:"");return l},controller:["$scope","$log","$routeParams","$rootScope","$q",function(t,e,l,o,a){var r=o.onRouteChanged(l)||function(){var t=a.defer();return t.resolve(),t.promise},n=alt.routeFolder+"/"+(l.altmodule?l.altmodule+"/":"")+(l.altcontroller?l.altcontroller+"/":"")+(l.altaction?l.altaction+"/":""),u=angular.element(document.getElementsByTagName("body")[0]).injector();r.then(function(){requirejs([n+"controller"],function(e){var l=0,a=[];if("function"==typeof e){for(l=0;l<arguments.length;l++)a.push(arguments[l]);a.push(u),e.apply(this,a)}else if("object"==typeof e&&e.length){var r,n="function"==typeof e[e.length-1]?e[e.length-1]:angular.noop,i="function"==typeof e[e.length-1]?e.length-1:e.length;for(l=0;i>l;l++){switch(r=null,e[l]){case"$scope":r=t;break;case"$injector":r=u;break;default:r=u.get(e[l])||null}a.push(r)}n.apply(this,a)}t.$apply(),o.$emit("$routeChangeLoaded")})})}]}},l.when("/",""!=alt.defaultRoute?{redirectTo:alt.defaultRoute}:alt.routing()),l.when("/:altaction",alt.routing()),l.when("/:altcontroller/:altaction",alt.routing()),l.when("/:altmodule/:altcontroller/:altaction",alt.routing()),l.otherwise({resolve:{redirectCheck:["$location",function(t){-1===t.absUrl().indexOf(alt.baseUrl)&&t.path("/")}]}})}]),alt.module("alt-route",alt.modules.route);